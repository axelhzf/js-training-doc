<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>jQuery | js-training</title>
  <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
  <header>
    <div class="logo">JS<small>training</small></div>
  </header>
  <div class="content"><p><a href="http://jquery.com/">jQuery</a> es una librería que permite manipular el DOM, manejar eventos, crear animaciones y realizar peticiones Ajax. Todo esto funcionando en multitud de navegadores. Una de las razones por las que jQuery es tan popular es por la cantidad de plugins que tiene.</p>
<p>Hace un par de años hubo una batalla entre librerías que ofrecian este tipo de funcionalidades: <a href="http://jquery.com/">jQuery</a>, <a href="http://mootools.net/">Mootols</a>, <a href="http://prototypejs.org/">Prototype</a>. jQuery fue el claro vencedor de la batalla, siendo el más utilizado en la actualidad. Es tán utilizado que un <a href="http://www.sitepoint.com/jquery-used-on-50-percent-of-websites/">estudio</a> dice que el 50% de las webs utilizan jQuery. Y lo que es más sorprendente, el 88.3% de las webs que utilizan JavaScript utilizan jQuery. Esto explica algunos memes que han aparecido como &quot;<a href="http://www.doxdesk.com/img/updates/20091116-so-large.gif">you should definitely use jQuery</a>&quot;.</p>
<p>La principal ventaja de utilizar jQuery es el <a href="http://jquery.com/browser-support/">soporte multinavegador</a>. Si estamos trabajando en una aplicación que trabaja con el DOM es conveniente utilizar jQuery porque nos ahorra muchos problemas de compatibilidad entre distintos navegadores. jQuery soporta la <a href="http://jquery.com/browser-support/">mayoría de navegadores</a> incluso navegadores obsoletos como IE6. A partir de la <a href="http://blog.jquery.com/2013/04/18/jquery-2-0-released/">versión 2</a> van a dejar de dar soporte a IE6, 7, 8 en un intento de hacer la librería más ligera y forzar a que la gente actualice sus navegadores para que la Web pueda evolucionar.</p>
<p>jQuery es una librería bastante pesada. Esto puede suponer un problemas cuando estamos trabajando para dispositivos móviles en los que la conexión puede que no sea rápida. Si esto supone un problema existen alternativas como <a href="http://zeptojs.com/">zepto.js</a>, una librería que con una API compatible pero más ligera.</p>
<p>La versión con la que vamos a trabajar en el curso es la 1.9.1. Para incluir la librería en la web podemos utilizar utilizando un CDN, por ejemplo el de google, o directamente utilizando una versión local.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/libs/jquery.min.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>En el caso de utilizar una versión local, es recomendable utilizar un gestor de paquetes, como por ejemplo <a href="http://twitter.github.io/bower/">bower</a>.</p>
<h1 id="-">$</h1>
<p>Todos los métodos de jQuery están expuestos a través del objeto <code>jQuery</code>. Este objeto a su vez tiene un alias con <code>$</code>. Esto es un claro ejemplo del uso del patrón <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/#facadepatternjavascript">Facade</a>.</p>
<pre><code class="lang-js"><span class="hljs-comment">// Código equivalente</span>
jQuery(<span class="hljs-string">'.title h1'</span>);
$(<span class="hljs-string">'.title h1'</span>);
</code></pre>
<p>Existen otras librerías como Mootols que también utilizan <code>$</code> para encapsular sus métodos. Mezclar estas dos librerías no es una muy buena idea, pero hay veces en las que es inevitable. En esos casos es necesario utilizar la función <code>noConflict</code>.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"other$lib.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"jquery.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
  $.noConflict();
  $  <span class="hljs-comment">// $ === other lib</span>

  jQuery(<span class="hljs-string">'.title h1'</span>);

  (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($)</span> {</span>
    $(<span class="hljs-string">'.title h1'</span>); <span class="hljs-comment">// $ == jQuery</span>
  })(jQuery);

</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>El uso básico de la librería consiste en utilizar un selector para seleccionar varios elementos y luego aplicar una acción sobre los elementos seleccionados.</p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">'#content'</span>).show();
<span class="hljs-variable">$(</span><span class="hljs-string">'.menu li'</span>).addClass(<span class="hljs-string">"active"</span>);
</code></pre>
<p>También existen algunas funciones que no se aplican a una selección de elementos del DOM.</p>
<pre><code class="lang-js">$.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/tweets'</span>);
</code></pre>
<p>Pasar una función como parámetro es equivalente a añadir un listener al evento document.ready.</p>
<pre><code class="lang-js">$(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    <span class="hljs-comment">// document ready code</span>
});

<span class="hljs-comment">//similar a</span>
$(document).ready(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>

});
</code></pre>
<p>El evento document.ready es importante porque no puedes modificar un elemento del DOM si todavía no se ha parseado.
Este código no va a funcionar porque el div con clase important todavía no se ha definido cuando se ejecuta el JavaScript.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
    $(<span class="hljs-string">".important"</span>).text(<span class="hljs-string">"Important text"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"importat"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Para solucionar podemos añadir un listener al evento <a href="http://api.jquery.com/ready/">document.ready</a> que se lanza cuando el DOM se ha cargado completamente. Este código si funciona.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
    $(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        $(<span class="hljs-string">".important"</span>).text(<span class="hljs-string">"Important text"</span>);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"importat"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Otra solución mucho mas sencilla y eficiente hubiera sido poner el bloque de script debajo del div, para que del div.important ya estuviera definido. Esta es una de las razones por las que se recomienda colocar el código JavaScript al final de la página.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"importat"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
    $(<span class="hljs-string">".important"</span>).text(<span class="hljs-string">"Important text"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<h1 id="selectores">Selectores</h1>
<p>jQuery utiliza la sintaxis de CSS para seleccionar elementos del DOM.</p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">"#content"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">".container"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"ul li.active"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"ul &gt; li"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"ul li:first-child"</span>);
</code></pre>
<p>Además de los selectores compatibles con CSS, jQuery añade algunos otros selectores</p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">"li:eq(2)"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"li:even"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"li:odd"</span>);
</code></pre>
<p><a href="http://api.jquery.com/category/selectors/">Lista completa de los selectores disponibles</a>.</p>
<p>Estos selectores trabajan en el contexto de toda la página. Podemos hacer los selectores más rápidos si reducimos el contexto.</p>
<pre><code class="lang-js">var <span class="hljs-variable">$content</span> = <span class="hljs-variable">$(</span><span class="hljs-string">'#content'</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">'li'</span>, <span class="hljs-variable">$content</span>);
<span class="hljs-variable">$content</span>.find(<span class="hljs-string">'li'</span>);
</code></pre>
<p>Todas las operaciones con el DOM son lentas, cuando trabajes con muchos elementos a la vez puedes empezar a notar retardos. Por eso es importante tratar de reducirlas lo máximo posible. Por ejemplo, podemos tratar de reducir el número de selector que hacemos guardando el resultado en una varaible</p>
<pre><code class="lang-js"><span class="hljs-keyword">for</span> (var <span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; <span class="hljs-number">10000</span>; <span class="hljs-built_in">i</span>++) <span class="hljs-cell">{
    $(<span class="hljs-string">'#container'</span>).html(i);
}</span>

var $container = $(<span class="hljs-string">'#container'</span>);
<span class="hljs-keyword">for</span> (var <span class="hljs-built_in">i</span> = <span class="hljs-number">0</span>; <span class="hljs-built_in">i</span> &lt; <span class="hljs-number">10000</span>; <span class="hljs-built_in">i</span>++) <span class="hljs-cell">{
    $container.html(i);
}</span>
</code></pre>
<p>Cuando tengamos dudas de rendimieneto de este tipo y queramos ver qué código es más rapido, podemos utilizar la web <a href="http://jsperf.com/">jsperf</a>. Por ejemplo en este jsperf se <a href="http://jsperf.com/caching-jquery-selectors/6">comprueba la velocidad de cachear selectores jQuery</a>.</p>
<p>Los selectores devuelven un objeto sobre el que podemos aplicar acciones para modificar los elementos. También podemos acceder a los elementos del DOM seleccionados.</p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">"li"</span>).<span class="hljs-keyword">hide</span>(); 

<span class="hljs-variable">$(</span><span class="hljs-string">"li"</span>).get(<span class="hljs-number">0</span>); <span class="hljs-comment">// DOM element at 0</span>
<span class="hljs-variable">$(</span><span class="hljs-string">"li"</span>)[<span class="hljs-number">0</span>];     <span class="hljs-comment">// DOM element at 1</span>
<span class="hljs-variable">$(</span><span class="hljs-string">"li"</span>).eq(<span class="hljs-number">1</span>);  <span class="hljs-comment">// jQuery object at 1</span>
</code></pre>
<h1 id="crear-elementos">Crear elementos</h1>
<p>El objeto jQuey también permite crear elementos nuevos</p>
<pre><code class="lang-js">$('&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"container"</span>&gt;New Element&lt;/<span class="hljs-keyword">div</span>&gt;').appendTo(<span class="hljs-string">"body"</span>);
</code></pre>
<p><a href="http://jsbin.com/dikewo/1/">http://jsbin.com/dikewo/1/</a></p>
<h1 id="getters-setter">Getters &amp; setter</h1>
<p>Existen funciones que actuan como getters y setters a la vez. En caso de que no le pases parámetros te devolverá el valor actual. Si le pasas un parámetro asignará ese valor.</p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">'li'</span>).html();
<span class="hljs-variable">$(</span><span class="hljs-string">'li'</span>).html(<span class="hljs-string">'New HTML'</span>);
</code></pre>
<h1 id="chaining">Chaining</h1>
<p>jQuery permite encadenar varias llamadas a métodos sobre el mismo selector. De esta forma nos evitamos tener que definir una variable o duplicar el selector.</p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">'a'</span>)
    .addClass(<span class="hljs-string">"btn"</span>)
    .attr(<span class="hljs-string">'title'</span>, <span class="hljs-string">'Nice link'</span> )
    .show();

var <span class="hljs-variable">$a</span> = <span class="hljs-variable">$(</span><span class="hljs-string">'a'</span>)
<span class="hljs-variable">$a</span>.addClass(<span class="hljs-string">"btn"</span>)
<span class="hljs-variable">$a</span>.attr(<span class="hljs-string">'title'</span>, <span class="hljs-string">'Nice link'</span> )
<span class="hljs-variable">$a</span>.show();
</code></pre>
<h1 id="manipulaci-n-de-elementos">Manipulación de elementos</h1>
<p><a href="http://api.jquery.com/category/manipulation/">http://api.jquery.com/category/manipulation/</a></p>
<pre><code class="lang-js"><span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).html(<span class="hljs-string">"New HTML"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).addClass(<span class="hljs-string">"className"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).removeClass(<span class="hljs-string">"className"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).toggleClass(<span class="hljs-string">"className"</span>);

<span class="hljs-variable">$(</span><span class="hljs-string">"input"</span>).val()
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).attr(<span class="hljs-string">"href"</span>, <span class="hljs-string">"http://www.google.com"</span>);
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).css(<span class="hljs-string">"font-size"</span>, <span class="hljs-string">"20px"</span>);

<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).appendTo()
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).append()
<span class="hljs-variable">$(</span><span class="hljs-string">"a"</span>).remove()
</code></pre>
<p><a href="http://jsbin.com/qokir/2/edit">http://jsbin.com/qokir/2/edit</a></p>
<h1 id="eventos">Eventos</h1>
<p>.on(&quot;click&quot;)
.off()
.trigger</p>
<p>click, keydown, keypress, keyup, mouseover, mouseenter, mouseleave, scroll, focus, blur, resize</p>
<p>namespaced events</p>
<p>$( &#39;li&#39; ).on( &#39;click&#39;, function() {
  console.log( &#39;a list item was clicked&#39; );
});</p>
<p>$( &#39;li&#39; ).on( &#39;click&#39;, function() {
  registerClick();
  doSomethingElse();
});</p>
<p>$( &#39;li&#39; ).off( &#39;click&#39; );</p>
<p>$( &#39;li&#39; ).on( &#39;click.logging&#39;, function() {
  console.log( &#39;a list item was clicked&#39; );
});</p>
<p>$( &#39;li&#39; ).on( &#39;click.analytics&#39;, function() {
  registerClick();
  doSomethingElse();
});</p>
<p>event object</p>
<p>$( document ).on( &#39;click&#39;, function( event ) {
  console.log( event.type );    // The event type, eg. &quot;click&quot;
  console.log( event.which );   // The button or key that was pressed.
  console.log( event.target );  // The originating element.
  console.log( event.pageX );   // The document mouse X coordinate.
  console.log( event.pageY );   // The document mouse Y coordinate.
});</p>
<p>prevent default action</p>
<p>event.preventDefault();</p>
<p>$( &#39;li&#39; ).off( &#39;click.logging&#39; );</p>
<p>Event delegation</p>
<p>$( &#39;#my-unordered-list&#39; ).on( &#39;click&#39;, function( event ) {
  console.log( event.target ); // logs the element that initiated the event
});</p>
<h1 id="efectos">Efectos</h1>
<p>An important note about animations: In modern browsers, and especially on mobile devices, it is often much more efficient to achieve animations using CSS rather than JavaScript. The details of doing this are beyond the scope of this guide, but if you are only targeting mobile devices or browsers that support CSS animations, then you should use CSS for animations where possible. You may also want to consider setting jQuery.fx.off to true on low-resource devices; doing so will cause animation methods to immediately set elements to the desired state, rather than animating to that state.</p>
<p>.show() Show the selected elements.
.hide() Hide the selected elements.
.fadeIn() Animate the opacity of the selected elements to 100%.
.fadeOut() Animate the opacity of the selected elements to 0%.
.slideDown() Display the selected elements with a vertical sliding motion.
.slideUp() Hide the selected elements with a vertical sliding motion.
.slideToggle() Show or hide the selected elements with a vertical sliding motion, depending on whether the elements are currently visible.</p>
<p>$( &#39;.hidden&#39; ).show( 300 );</p>
<p>$( &#39;p.old&#39; ).fadeOut( 300, function() {
  $( this ).remove();
});</p>
<h1 id="-ajax-y-defered">$.ajax y Defered</h1>
<p>AJAX -- &quot;asynchronous JavaScript and XML&quot; — is a means of loading data from a server without requiring a page reload. It uses a browser&#39;s built-in XMLHttpRequest (XHR) functionality to make a request to the server and then handle the data that the server returns.</p>
<p>jQuery provides the $.ajax method — and several convenience methods — to make it easier to work with XHRs across browsers.</p>
<h2 id="json">JSON</h2>
<p>$.ajax
$.get
$.post</p>
<p>que es un json</p>
<p>JSON.parse
JSON.stringify</p>
<h2 id="-deferred">$.Deferred</h2>
<p>.then
.done
.fail
.always
.when</p>
<p>function doSomethingLater( fn, time ) {
  var dfd = $.Deferred();</p>
<p>  setTimeout(function() {
    dfd.resolve( fn() );
  }, time || 0);</p>
<p>  return dfd.promise();
}</p>
<p>var promise = doSomethingLater(function() {
  console.log( &#39;This function will be called in 100ms&#39; );
}, 100);</p>
<h1 id="referencias">Referencias</h1>
<ul>
<li><a href="http://api.jquery.com/">http://api.jquery.com/</a></li>
<li><a href="http://jqfundamentals.com/">http://jqfundamentals.com/</a></li>
<li><a href="http://twitter.github.io/bower/">http://twitter.github.io/bower/</a></li>
</ul>

  </div>
  <footer><a href="http://twitter.com/axelhzf" about="_blank">Twitter</a><a href="http://github.com/axelhzf" about="_blank">Github</a></footer>
</body>