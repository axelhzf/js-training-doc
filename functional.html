<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title> | js-training</title>
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <header><a href="index.html" class="logo">JS<small>training</small></a></header>
  <div class="content"><h1 id="functional-programming">Functional programming</h1>
<p>¿Podemos considerar JavaScript como un lenguaje funcional? Pues <a href="http://stackoverflow.com/questions/3962604/is-javascript-a-functional-programming-language">depende de la definición que utilicemos</a> de lenguaje funcional. Si definimos un lenguaje funcional como aquel que tiene first class functions (las funciones se pueden utilizar como parámetros y como valores a devolver), entonces podemos considerar JavaScript como un lenguaje funcional. En cambio si incluimos en la definición conceptos como inmutabilidad o pattern matching, entonces JavaScript no es un lenguaje funcional.</p>
<blockquote>
<p>Functional programming is the use of functions that transform values into units of ab‐ straction, subsequently used to build software systems.</p>
<p>The major evolution that is still going on for me is towards a more functional program‐ ming style, which involves unlearning a lot of old habits, and backing away from some OOP directions.
--John Carmack</p>
</blockquote>
<p>Vamos a utilizar <a href="http://underscorejs.org/">Underscore</a>, una librería que cuenta con un conjunto de funciones de utilidad funcionales. La librería delega en la funciones nativas del navegador si existe una implementación. Por ejemplo una llamada a <code>_.each</code> será una simple llamada a <code>.forEach</code> en el caso de que el navegador la soporte. Underscore es una librería muy importante, está el número 1 en la lista de los módulos más utilizados en <a href="https://www.npmjs.org/">npm</a>. </p>
<p>También es interesante conocer <a href="http://lodash.com/">lo-dash</a>, un remplazo completo de Underscore, más eficiente y que añade algunas funcionalides, y <a href="http://danieltao.com/lazy.js/">lazy.js</a>, que no es un remplazo completo de Underscore, pero añade un concepto interesante, lazy evaluation, que hace que se dispare la eficiencia.</p>
<h2 id="-por-qu-la-programaci-n-funcional-es-importante-">¿Por qué la programación funcional es importante?</h2>
<p>¿Podrías decir a simple vista qué hace este código?</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> <span class="hljs-keyword">array</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">var</span> results = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">array</span>.length; ++i) {
  <span class="hljs-keyword">var</span> value = (<span class="hljs-keyword">array</span>[i] * <span class="hljs-keyword">array</span>[i]) + <span class="hljs-number">1</span>;
  <span class="hljs-keyword">if</span> (value % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) {
    results.push(value);
    <span class="hljs-keyword">if</span> (results.length === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">break</span>;
    }
  }
}
</code></pre>
<p>Vamos a reescribir este mismo código de forma funcional</p>
<pre><code class="lang-js">var array = <span class="hljs-matrix">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</span>;
var result = <span class="hljs-transposed_variable">_.</span>chain(array)
 .map(square)
 .map(inc)
 .filter(isEven)
 .head(<span class="hljs-number">1</span>)
 .value();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span><span class="hljs-params">(i)</span> {</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">i</span> * <span class="hljs-built_in">i</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inc</span><span class="hljs-params">(i)</span> {</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">i</span> + <span class="hljs-number">1</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEven</span><span class="hljs-params">(i)</span> {</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">i</span> <span class="hljs-comment">% 2 === 0;</span>
}
</code></pre>
<p>Tenemos un trozo de código más compacto y legible. Además hemos creados algunas funciones como <code>square</code> o <code>inc</code> que podremos reutilizar. </p>
<p>Vamos a ver cómo aplicar programación funcional a un ejemplo de la vida real.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> clients = [
  {firstName: <span class="hljs-string">"Princess"</span>, lastName: <span class="hljs-string">"Hernández"</span>, balance: <span class="hljs-number">50</span>},
  {firstName: <span class="hljs-string">"Darth"</span>, lastName: <span class="hljs-string">"Vader"</span>, balance: -<span class="hljs-number">20</span>},
  {firstName: <span class="hljs-string">"Luke"</span>, lastName: <span class="hljs-string">"Skywalker"</span>, balance: -<span class="hljs-number">30</span>},
  {firstName: <span class="hljs-string">"Han"</span>, lastName: <span class="hljs-string">"Solo"</span>, balance: <span class="hljs-number">100</span>}
];

<span class="hljs-keyword">var</span> result = _.chain(clients)
  .filter(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(client)</span> {</span>
    <span class="hljs-keyword">return</span> client.balance &lt; <span class="hljs-number">0</span>;
  })
  .sortBy(<span class="hljs-string">"balance"</span>)
  .map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(client)</span> {</span>
    <span class="hljs-keyword">return</span> client.firstName + <span class="hljs-string">" "</span> + client.lastName;
  })
  .value();
</code></pre>
<h2 id="ejercicio-functional">Ejercicio: functional</h2>
<p>Completa los test propuestos utilizando las funciones de underscore.</p>
<h2 id="referencias">Referencias</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/3962604/is-javascript-a-functional-programming-language">http://stackoverflow.com/questions/3962604/is-javascript-a-functional-programming-language</a></li>
<li><a href="http://www.amazon.com/Functional-JavaScript-Introducing-Programming-Underscore-js/dp/1449360726/">http://www.amazon.com/Functional-JavaScript-Introducing-Programming-Underscore-js/dp/1449360726/</a></li>
<li><a href="https://github.com/timoxley/functional-javascript-workshop">https://github.com/timoxley/functional-javascript-workshop</a></li>
</ul>

  </div>
  <footer><div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
<script type="text/javascript">
    var disqus_shortname = 'axelhzf';
    // var disqus_developer = 1;
    var disqus_script = 'embed.js';

    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>
    <p>Autor:<strong> Axel Hernández Ferrera</strong> (<a href="http://axelhzf.com" target="_blank">blog</a>, <a href="http://twitter.com/axelhzf" target="_blank">twitter</a>, <a href="http://github.com/axelhzf" target="_blank">github</a>)</p>
  </footer><script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-31904298-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
</body>